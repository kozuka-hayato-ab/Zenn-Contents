---
title: "ILPostProcessorã«ã‚ˆã‚‹å®šæ•°æ›¸ãæ›ãˆå…¥é–€"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Unity", "ILPostProcessor", "é»’é­”è¡“"]
published: false
---

ã€Œ[Applibot Advent Calendar 2023](https://qiita.com/advent-calendar/2023/applibot)ã€ 8æ—¥ç›®ã®è¨˜äº‹ã«ãªã‚Šã¾ã™ã€‚
å‰æ—¥ã¯ [@mori_yuki](https://qiita.com/mori_yuki) ã•ã‚“ã®ã€Œ[é›»å­å·¥ä½œåˆå¿ƒè€…ãŒé›»å­æ¥½å™¨ä½œã£ã¦ã¿ãŸ](https://qiita.com/h_km/items/fuga)ã€ã¨ã„ã†è¨˜äº‹ã§ã—ãŸ!

## ã¯ã˜ã‚ã«
æœ¬è¨˜äº‹ã§ã¯ILPostProcessorã‚’ç”¨ã„ãŸå®šæ•°æ›¸ãæ›ãˆã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚
ç­†è€…ã¯æœ€è¿‘ILPostProcessorã‚’ä½¿ã„å§‹ã‚ãŸãŒã€è‡ªç”±ã«ä½¿ã„ã“ãªã›ã‚‹ãƒ¬ãƒ™ãƒ«ã§ã¯ãªã„ã®ã§ã€ãŠè¦‹è‹¦ã—ã„ç‚¹ã‚‚å¤šã€…ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
æ¸©ã‹ã„ç›®ã§è¦‹å®ˆã£ã¦ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

## ILPostProcessorã«ã¤ã„ã¦
ILPostProcessorã¯ã€UnityãŒç”Ÿæˆã™ã‚‹ILã«å¯¾ã—ã¦æ‰‹ã‚’åŠ ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ä»•çµ„ã¿ã§ã™ã€‚
Unityã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã«å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã€ç‰¹å®šã®å€¤ã®æ›¸ãæ›ãˆã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã®æ›¸ãæ›ãˆãªã©ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

## å®Ÿè¡Œç’°å¢ƒ
- OS: macOS 12.4
- Unity: 2022.3.11f1(SILICON)

## æ›¸ãæ›ãˆäºˆå®šã‚¯ãƒ©ã‚¹ã®ç”¨æ„
```
Settings
â”œâ”€â”€ ProjectDefine.cs
â”œâ”€â”€ Settings.asmdef
â””â”€â”€ TemporaryClass.cs
```
**ProjectDefine.cs**
ä»Šå›æ›¸ãæ›ãˆäºˆå®šã®ã‚¯ãƒ©ã‚¹
**TemporaryClass.cs**
MonoBehaviourã‚’ç¶™æ‰¿ã—ãŸå‹•ä½œç¢ºèªç”¨ã‚¯ãƒ©ã‚¹
Sceneã®GameObjectã«ã‚¢ã‚¿ãƒƒãƒ
**Settings.asmdef**
ProjectDefineã‚’å«ã‚€Assemblyã‚’ä½œæˆã™ã‚‹

:::details æ›¸ãæ›ãˆäºˆå®šã®ã‚¯ãƒ©ã‚¹
```csharp: ProjectDefine.cs
namespace Settings
{
    public class ProjectDefine
    {
        /// <summary>
        /// æ›¸ãæ›ãˆãŸã„æ–‡å­—åˆ—
        /// </summary>
        public string Value { get; } = "Hello World";
    }
}
```
:::

## ILPostProcessorã®ä¸‹æº–å‚™
### Mono.Cecilã®å°å…¥
Unityã®Package Manager Windowã‚ˆã‚Š
1. [+]ã‚’æŠ¼ä¸‹
2. ã€ŒAdd package from git URL ...ã€ã‚’æŠ¼ä¸‹
3. `com.unity.nuget.mono-cecil`ã‚’å…¥åŠ›

### ã‚¯ãƒ©ã‚¹ã®æº–å‚™
```
ILPostProcessor
â”œâ”€â”€ ConstantRewritingPostProcessor.cs
â”œâ”€â”€ ILPostProcessorUtility.cs
â”œâ”€â”€ PostProcessorAssemblyResolver.cs
â””â”€â”€ Unity.Constant.Rewriting.CodeGen.asmdef
```
**ILPostProcessorUtility.cs**
**PostProcessorAssemblyResolver.cs**
ã“ã¡ã‚‰ã®2ãƒ•ã‚¡ã‚¤ãƒ«ã¯å‚è€ƒè¨˜äº‹1ã‚ˆã‚Šæ‹å€Ÿã„ãŸã—ã¾ã—ãŸ
https://github.com/sune2/MethodChangeWithILPostProcessor/tree/master

**ConstantRewritingPostProcessor.cs**
æ›¸ãæ›ãˆå‡¦ç½®ã‚’è¨˜è¼‰ã—ã¦ã„ãã‚¯ãƒ©ã‚¹

**Unity.Constant.Rewriting.CodeGen.asmdef**
Unity.XXXX.CodeGenã®åå‰ã§ä½œæˆã—ãŸasmdef
:::details asmdefã®è¨­å®š
![](/images/2023-12-09/asmdef_inspector.png)
**AutoReferenced**
falseã«è¨­å®š
**Override References**
trueã«è¨­å®š
**AssemblyDifinitionReferences**
æ›¸ãæ›ãˆãŸã„Assemblyã®å‚ç…§ã‚’è¿½åŠ 
**Assembly References**
Mono.Cecilå‘¨ã‚Šã®DLLã‚’è¿½åŠ 
- Mono.Cecil.dll
- Mono.Cecil.Mdb.dll
- Mono.Cecil.Pdb.dll
- Mono.Cecil.Rocks.dll

**Platform**
Editorã®ã¿æœ‰åŠ¹
:::

## ILã‚’èª­ã‚€
[SharpLab](https://sharplab.io/)ã‚’ç”¨ã„ã¦ã€ProjectDefine.csã‚’èª¿ã¹ã‚‹
:::details ProjectDefine.csã®IL
```csharp: ProjectDefine.cs -> IL
.assembly _
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilationRelaxationsAttribute::.ctor(int32) = (
        01 00 08 00 00 00 00 00
    )
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.RuntimeCompatibilityAttribute::.ctor() = (
        01 00 01 00 54 02 16 57 72 61 70 4e 6f 6e 45 78
        63 65 70 74 69 6f 6e 54 68 72 6f 77 73 01
    )
    .custom instance void [System.Runtime]System.Diagnostics.DebuggableAttribute::.ctor(valuetype [System.Runtime]System.Diagnostics.DebuggableAttribute/DebuggingModes) = (
        01 00 07 01 00 00 00 00
    )
    .permissionset reqmin = (
        2e 01 80 8a 53 79 73 74 65 6d 2e 53 65 63 75 72
        69 74 79 2e 50 65 72 6d 69 73 73 69 6f 6e 73 2e
        53 65 63 75 72 69 74 79 50 65 72 6d 69 73 73 69
        6f 6e 41 74 74 72 69 62 75 74 65 2c 20 53 79 73
        74 65 6d 2e 52 75 6e 74 69 6d 65 2c 20 56 65 72
        73 69 6f 6e 3d 37 2e 30 2e 30 2e 30 2c 20 43 75
        6c 74 75 72 65 3d 6e 65 75 74 72 61 6c 2c 20 50
        75 62 6c 69 63 4b 65 79 54 6f 6b 65 6e 3d 62 30
        33 66 35 66 37 66 31 31 64 35 30 61 33 61 15 01
        54 02 10 53 6b 69 70 56 65 72 69 66 69 63 61 74
        69 6f 6e 01
    )
    .hash algorithm 0x00008004 // SHA1
    .ver 0:0:0:0
}

.class private auto ansi '<Module>'
{
} // end of class <Module>

.class public auto ansi beforefieldinit Settings.ProjectDefine
    extends [System.Runtime]System.Object
{
    .custom instance void System.Runtime.CompilerServices.NullableContextAttribute::.ctor(uint8) = (
        01 00 01 00 00
    )
    .custom instance void System.Runtime.CompilerServices.NullableAttribute::.ctor(uint8) = (
        01 00 00 00 00
    )
    // Fields
    .field private initonly string '<Value>k__BackingField'
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Runtime]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )

    // Methods
    .method public hidebysig specialname 
        instance string get_Value () cil managed 
    {
        .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
            01 00 00 00
        )
        // Method begins at RVA 0x20a2
        // Code size 7 (0x7)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldfld string Settings.ProjectDefine::'<Value>k__BackingField'
        IL_0006: ret
    } // end of method ProjectDefine::get_Value

    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x20aa
        // Code size 19 (0x13)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldstr "Hello World"
        IL_0006: stfld string Settings.ProjectDefine::'<Value>k__BackingField'
        IL_000b: ldarg.0
        IL_000c: call instance void [System.Runtime]System.Object::.ctor()
        IL_0011: nop
        IL_0012: ret
    } // end of method ProjectDefine::.ctor

    // Properties
    .property instance string Value()
    {
        .get instance string Settings.ProjectDefine::get_Value()
    }

} // end of class Settings.ProjectDefine

.class private auto ansi sealed beforefieldinit Microsoft.CodeAnalysis.EmbeddedAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x2050
        // Code size 8 (0x8)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ret
    } // end of method EmbeddedAttribute::.ctor

} // end of class Microsoft.CodeAnalysis.EmbeddedAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.NullableAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 84 6b 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly uint8[] NullableFlags

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2059
        // Code size 24 (0x18)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldc.i4.1
        IL_0009: newarr [System.Runtime]System.Byte
        IL_000e: dup
        IL_000f: ldc.i4.0
        IL_0010: ldarg.1
        IL_0011: stelem.i1
        IL_0012: stfld uint8[] System.Runtime.CompilerServices.NullableAttribute::NullableFlags
        IL_0017: ret
    } // end of method NullableAttribute::.ctor

    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8[] ''
        ) cil managed 
    {
        // Method begins at RVA 0x2072
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld uint8[] System.Runtime.CompilerServices.NullableAttribute::NullableFlags
        IL_000e: ret
    } // end of method NullableAttribute::.ctor

} // end of class System.Runtime.CompilerServices.NullableAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.NullableContextAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 4c 14 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly uint8 Flag

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2082
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld uint8 System.Runtime.CompilerServices.NullableContextAttribute::Flag
        IL_000e: ret
    } // end of method NullableContextAttribute::.ctor

} // end of class System.Runtime.CompilerServices.NullableContextAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.RefSafetyRulesAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 02 00 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly int32 Version

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            int32 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2092
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld int32 System.Runtime.CompilerServices.RefSafetyRulesAttribute::Version
        IL_000e: ret
    } // end of method RefSafetyRulesAttribute::.ctor

} // end of class System.Runtime.CompilerServices.RefSafetyRulesAttribute


```
:::
ä»Šå›æ›¸ãæ›ãˆãŸã„`Hello World`ã¯.ctorãƒ¡ã‚½ãƒƒãƒ‰å†…ldstrã«å­˜åœ¨ã™ã‚‹ãŸã‚ã€ãã¡ã‚‰ã‚’æ›¸ãæ›ãˆã‚‹æ–¹é‡ã§é€²ã‚ã‚‹

### ILã«ã¤ã„ã¦ã®ç†è§£ã‚’æ·±ã‚ã‚‹
:::details ä»Šå›ã®ILã«ã¤ã„ã¦
**.method public hidebysig specialname rtspecialname instance void .ctor () cil managed**
publicãªã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ`.ctor`ï¼‰ã‚’å®šç¾©ã—ã¦ã„ã‚‹
**IL_0000: ldarg.0**
0ç•ªç›®ã®å¼•æ•°ï¼ˆã¤ã¾ã‚Šã€ã“ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¡ã‚½ãƒƒãƒ‰è‡ªèº«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ã‚’è©•ä¾¡ã‚¹ã‚¿ãƒƒã‚¯ã«ãƒ­ãƒ¼ãƒ‰
**IL_0001: ldstr "Hello World"**
æ–‡å­—åˆ—"Hello World"ã‚’è©•ä¾¡ã‚¹ã‚¿ãƒƒã‚¯ã«ãƒ­ãƒ¼ãƒ‰
**IL_0006: stfld string Settings.ProjectDefine::'<Value>k__BackingField'**
è©•ä¾¡ã‚¹ã‚¿ãƒƒã‚¯ã®æœ€ä¸Šä½ã«ã‚ã‚‹å€¤ï¼ˆã¤ã¾ã‚Šã€"Hello World"ï¼‰ã‚’ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰`'<Value>k__BackingField'`ã«ä¿å­˜
**IL_000b: ldarg.0**
å†åº¦ã€0ç•ªç›®ã®å¼•æ•°ï¼ˆã¤ã¾ã‚Šã€ã“ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¡ã‚½ãƒƒãƒ‰è‡ªèº«ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰ã‚’è©•ä¾¡ã‚¹ã‚¿ãƒƒã‚¯ã«ãƒ­ãƒ¼ãƒ‰
**IL_000c: call instance void [System.Runtime]System.Object::.ctor()**
åŸºåº•ã‚¯ãƒ©ã‚¹`System.Object`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å‘¼ã³å‡ºã™
ã™ã¹ã¦ã®.NETã‚¯ãƒ©ã‚¹ãŒæš—é»™çš„ã«`System.Object`ã‚’ç¶™æ‰¿ã™ã‚‹ãŸã‚ã®ä¸€èˆ¬çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹
**IL_0011: nop**
ä½•ã‚‚ã—ãªã„å‘½ä»¤ï¼ˆno operationï¼‰
ãƒ‡ãƒãƒƒã‚¬ãŒãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã—ã°ã—ã°ä½¿ç”¨ã•ã‚Œã‚‹
**IL_0012: ret**
ãƒ¡ã‚½ãƒƒãƒ‰ã®çµ‚äº†ã¨æˆ»ã‚Šå€¤ã®è¿”å´ã‚’ç¤ºã™
:::

### .ctorã«ã¤ã„ã¦ã®ç†è§£ã‚’æ·±ã‚ã‚‹
.ctorã¨ã¯ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã§ã‚ã‚‹
`ProjectDefine.cs`ã§ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ãŒã€C#ã®ã‚¯ãƒ©ã‚¹ã§ã¯ã€æ˜ç¤ºçš„ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã‚’æ›¸ã‹ãªãã¦ã‚‚ã€æš—é»™çš„ã«ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ãŒ1ã¤ä½œã‚‰ã‚Œã‚‹
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åˆæœŸåŒ–ã‚’å®šç¾©ã—ãŸéš›ã¯ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§åˆæœŸåŒ–ã•ã‚Œã‚‹ã£ã½ã„


## PostProcessorã®ä½œæˆ
:::details å®šæ•°æ›¸ãæ›ãˆã®PostProcessor
```csharp ConstantRewritingPostProcessor.cs
using System.Collections.Generic;
using System.Linq;
using Mono.Cecil.Cil;
using Unity.CompilationPipeline.Common.Diagnostics;
using Unity.CompilationPipeline.Common.ILPostProcessing;

namespace Constant.Rewriting.CodeGen
{
    public class ConstantRewritingPostProcessor : ILPostProcessor
    {
        public override ILPostProcessor GetInstance() => this;

        public override bool WillProcess(ICompiledAssembly compiledAssembly)
        {
            // Settings Assemblyã®ã¿ã‚’å¯¾è±¡ã¨ã™ã‚‹
            return compiledAssembly.Name == "Settings";
        }
        
        public override ILPostProcessResult Process(ICompiledAssembly compiledAssembly)
        {
            if (!WillProcess(compiledAssembly))
            {
                return null;
            }

            using var assembly = ILPostProcessUtility.AssemblyDefinitionFor(compiledAssembly);
            var diagnosticMessageList = new List<DiagnosticMessage>();
            foreach (var type in assembly.MainModule.Types)
            {
                // Settings.ProjectDefineå‹ã‚’æ¢ã™
                if (type.FullName != "Settings.ProjectDefine")
                {
                    continue;
                }

                // Settings.ProjectDefineã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å–å¾—ã™ã‚‹
                var methodDefinition = type.Methods.FirstOrDefault((method) => method.Name == ".ctor");
                
                if (methodDefinition == null)
                {
                    diagnosticMessageList.Add(new DiagnosticMessage()
                    {
                        MessageData = ".ctorãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
                        DiagnosticType = DiagnosticType.Warning
                    });
                    continue;
                }

                var postProcessor = methodDefinition.Body.GetILProcessor();
                
                // ldstrã‚’å–å¾—ã™ã‚‹
                var ldstrInstruction = postProcessor.Body.Instructions.FirstOrDefault((instruction) => instruction.OpCode == OpCodes.Ldstr);
                if (ldstrInstruction == null)
                {
                    diagnosticMessageList.Add(new DiagnosticMessage()
                    {
                        MessageData = "ldstrãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
                        DiagnosticType = DiagnosticType.Warning
                    });
                    continue;
                }
                
                // ldstrã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã‚’æ›¸ãæ›ãˆã‚‹
                ldstrInstruction.Operand = "Hello ILPostProcessor";
                return ILPostProcessUtility.GetResult(assembly, diagnosticMessageList);
            }
            return new ILPostProcessResult(null, diagnosticMessageList);
        }
    }
}
```
:::
`ProjectDefine`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿`.ctor`ã«ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€Settingsã®Assemblyã‹ã‚‰ã“ã¡ã‚‰ã‚’æ¤œç´¢
Ldstrã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã‚’`Hello ILPostProcessor`ã«æ›¸ãæ›ãˆãŸ

### çµæœ
![](/images/2023-12-09/console_log_1.png)
å®Ÿè¡Œæ™‚ã«æ›¸ãå¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## æ¤œè¨¼
`ProjectDefine.cs`ã«è¤‡æ•°ã®å®šç¾©ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ILã«ã¤ã„ã¦æ¤œè¨¼ã™ã‚‹
:::details å®šç¾©ãŒ2ã¤å­˜åœ¨ã™ã‚‹å ´åˆã® ProjectDefine
```csharp ProjectDefine.cs
namespace Settings
{
    public class ProjectDefine
    {
        /// <summary>
        /// æ›¸ãæ›ãˆãªãã¦ã‚‚ã„ã„æ–‡å­—åˆ—
        /// </summary>
        public string Value2 { get; } = "Hello Japan";

        /// <summary>
        /// æ›¸ãæ›ãˆãŸã„æ–‡å­—åˆ—
        /// </summary>
        public string Value { get; } = "Hello World";
    }
}
```
:::

:::details ProjectDefine.csã®IL
```csharp: ProjectDefine.cs -> IL
.assembly _
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilationRelaxationsAttribute::.ctor(int32) = (
        01 00 08 00 00 00 00 00
    )
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.RuntimeCompatibilityAttribute::.ctor() = (
        01 00 01 00 54 02 16 57 72 61 70 4e 6f 6e 45 78
        63 65 70 74 69 6f 6e 54 68 72 6f 77 73 01
    )
    .custom instance void [System.Runtime]System.Diagnostics.DebuggableAttribute::.ctor(valuetype [System.Runtime]System.Diagnostics.DebuggableAttribute/DebuggingModes) = (
        01 00 07 01 00 00 00 00
    )
    .permissionset reqmin = (
        2e 01 80 8a 53 79 73 74 65 6d 2e 53 65 63 75 72
        69 74 79 2e 50 65 72 6d 69 73 73 69 6f 6e 73 2e
        53 65 63 75 72 69 74 79 50 65 72 6d 69 73 73 69
        6f 6e 41 74 74 72 69 62 75 74 65 2c 20 53 79 73
        74 65 6d 2e 52 75 6e 74 69 6d 65 2c 20 56 65 72
        73 69 6f 6e 3d 37 2e 30 2e 30 2e 30 2c 20 43 75
        6c 74 75 72 65 3d 6e 65 75 74 72 61 6c 2c 20 50
        75 62 6c 69 63 4b 65 79 54 6f 6b 65 6e 3d 62 30
        33 66 35 66 37 66 31 31 64 35 30 61 33 61 15 01
        54 02 10 53 6b 69 70 56 65 72 69 66 69 63 61 74
        69 6f 6e 01
    )
    .hash algorithm 0x00008004 // SHA1
    .ver 0:0:0:0
}

.class private auto ansi '<Module>'
{
} // end of class <Module>

.class public auto ansi beforefieldinit Settings.ProjectDefine
    extends [System.Runtime]System.Object
{
    .custom instance void System.Runtime.CompilerServices.NullableContextAttribute::.ctor(uint8) = (
        01 00 01 00 00
    )
    .custom instance void System.Runtime.CompilerServices.NullableAttribute::.ctor(uint8) = (
        01 00 00 00 00
    )
    // Fields
    .field private initonly string '<Value2>k__BackingField'
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Runtime]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )
    .field private initonly string '<Value>k__BackingField'
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.Diagnostics.DebuggerBrowsableAttribute::.ctor(valuetype [System.Runtime]System.Diagnostics.DebuggerBrowsableState) = (
        01 00 00 00 00 00 00 00
    )

    // Methods
    .method public hidebysig specialname 
        instance string get_Value2 () cil managed 
    {
        .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
            01 00 00 00
        )
        // Method begins at RVA 0x20a2
        // Code size 7 (0x7)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldfld string Settings.ProjectDefine::'<Value2>k__BackingField'
        IL_0006: ret
    } // end of method ProjectDefine::get_Value2

    .method public hidebysig specialname 
        instance string get_Value () cil managed 
    {
        .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
            01 00 00 00
        )
        // Method begins at RVA 0x20aa
        // Code size 7 (0x7)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldfld string Settings.ProjectDefine::'<Value>k__BackingField'
        IL_0006: ret
    } // end of method ProjectDefine::get_Value

    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x20b2
        // Code size 30 (0x1e)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: ldstr "Hello Japan"
        IL_0006: stfld string Settings.ProjectDefine::'<Value2>k__BackingField'
        IL_000b: ldarg.0
        IL_000c: ldstr "Hello World"
        IL_0011: stfld string Settings.ProjectDefine::'<Value>k__BackingField'
        IL_0016: ldarg.0
        IL_0017: call instance void [System.Runtime]System.Object::.ctor()
        IL_001c: nop
        IL_001d: ret
    } // end of method ProjectDefine::.ctor

    // Properties
    .property instance string Value2()
    {
        .get instance string Settings.ProjectDefine::get_Value2()
    }
    .property instance string Value()
    {
        .get instance string Settings.ProjectDefine::get_Value()
    }

} // end of class Settings.ProjectDefine

.class private auto ansi sealed beforefieldinit Microsoft.CodeAnalysis.EmbeddedAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        // Method begins at RVA 0x2050
        // Code size 8 (0x8)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ret
    } // end of method EmbeddedAttribute::.ctor

} // end of class Microsoft.CodeAnalysis.EmbeddedAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.NullableAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 84 6b 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly uint8[] NullableFlags

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2059
        // Code size 24 (0x18)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldc.i4.1
        IL_0009: newarr [System.Runtime]System.Byte
        IL_000e: dup
        IL_000f: ldc.i4.0
        IL_0010: ldarg.1
        IL_0011: stelem.i1
        IL_0012: stfld uint8[] System.Runtime.CompilerServices.NullableAttribute::NullableFlags
        IL_0017: ret
    } // end of method NullableAttribute::.ctor

    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8[] ''
        ) cil managed 
    {
        // Method begins at RVA 0x2072
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld uint8[] System.Runtime.CompilerServices.NullableAttribute::NullableFlags
        IL_000e: ret
    } // end of method NullableAttribute::.ctor

} // end of class System.Runtime.CompilerServices.NullableAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.NullableContextAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 4c 14 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly uint8 Flag

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            uint8 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2082
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld uint8 System.Runtime.CompilerServices.NullableContextAttribute::Flag
        IL_000e: ret
    } // end of method NullableContextAttribute::.ctor

} // end of class System.Runtime.CompilerServices.NullableContextAttribute

.class private auto ansi sealed beforefieldinit System.Runtime.CompilerServices.RefSafetyRulesAttribute
    extends [System.Runtime]System.Attribute
{
    .custom instance void [System.Runtime]System.Runtime.CompilerServices.CompilerGeneratedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void Microsoft.CodeAnalysis.EmbeddedAttribute::.ctor() = (
        01 00 00 00
    )
    .custom instance void [System.Runtime]System.AttributeUsageAttribute::.ctor(valuetype [System.Runtime]System.AttributeTargets) = (
        01 00 02 00 00 00 02 00 54 02 0d 41 6c 6c 6f 77
        4d 75 6c 74 69 70 6c 65 00 54 02 09 49 6e 68 65
        72 69 74 65 64 00
    )
    // Fields
    .field public initonly int32 Version

    // Methods
    .method public hidebysig specialname rtspecialname 
        instance void .ctor (
            int32 ''
        ) cil managed 
    {
        // Method begins at RVA 0x2092
        // Code size 15 (0xf)
        .maxstack 8

        IL_0000: ldarg.0
        IL_0001: call instance void [System.Runtime]System.Attribute::.ctor()
        IL_0006: nop
        IL_0007: ldarg.0
        IL_0008: ldarg.1
        IL_0009: stfld int32 System.Runtime.CompilerServices.RefSafetyRulesAttribute::Version
        IL_000e: ret
    } // end of method RefSafetyRulesAttribute::.ctor

} // end of class System.Runtime.CompilerServices.RefSafetyRulesAttribute
```
:::

ldstrãŒ2ã¤å­˜åœ¨ã™ã‚‹ãŸã‚ã€ä¸Šè¿°ã®PostProcessorã§ã¯`Value`, `Value2`ã®ã†ã¡æœ€åˆã«æ¤œç´¢ã•ã‚ŒãŸldstrã®ã¿ãŒæ›¸ãå¤‰ã‚ã‚‹
![](/images/2023-12-09/console_log_2.png)
ãã“ã§ã€stfldã‚’åˆ¤å®šã«ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’è€ƒãˆã‚‹

## PostProcessorã®ä½œæˆ ãã®2
:::details å®šæ•°æ›¸ãæ›ãˆã®PostProcessor
```csharp ConstantRewritingPostProcessor.cs
using System.Collections.Generic;
using System.Linq;
using Mono.Cecil.Cil;
using Settings;
using Unity.CompilationPipeline.Common.Diagnostics;
using Unity.CompilationPipeline.Common.ILPostProcessing;

namespace Constant.Rewriting.CodeGen
{
    public class ConstantRewritingPostProcessor : ILPostProcessor
    {
        public override ILPostProcessor GetInstance() => this;

        public override bool WillProcess(ICompiledAssembly compiledAssembly)
        {
            // Settings Assemblyã®ã¿ã‚’å¯¾è±¡ã¨ã™ã‚‹
            return compiledAssembly.Name == "Settings";
        }
        
        public override ILPostProcessResult Process(ICompiledAssembly compiledAssembly)
        {
            if (!WillProcess(compiledAssembly))
            {
                return null;
            }

            using var assembly = ILPostProcessUtility.AssemblyDefinitionFor(compiledAssembly);
            var diagnosticMessageList = new List<DiagnosticMessage>();
            foreach (var type in assembly.MainModule.Types)
            {
                // Settings.ProjectDefineå‹ã‚’æ¢ã™
                if (type.FullName != "Settings.ProjectDefine")
                {
                    continue;
                }

                // Settings.ProjectDefineã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚’å–å¾—ã™ã‚‹
                var methodDefinition = type.Methods.FirstOrDefault((method) => method.Name == ".ctor");
                
                if (methodDefinition == null)
                {
                    diagnosticMessageList.Add(new DiagnosticMessage()
                    {
                        MessageData = ".ctorãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
                        DiagnosticType = DiagnosticType.Warning
                    });
                    continue;
                }

                var postProcessor = methodDefinition.Body.GetILProcessor();

                for (int i = 0; i < postProcessor.Body.Instructions.Count; i++)
                {
                    var instruction = postProcessor.Body.Instructions[i];
                    // å‘½ä»¤ã®ã‚ªãƒšã‚³ãƒ¼ãƒ‰ãŒStfldã§ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
                    if (instruction.OpCode != OpCodes.Stfld)
                    {
                        continue;
                    }
                    // å‘½ä»¤ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã«ValueãŒå«ã¾ã‚Œã¦ã„ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
                    if (!instruction.Operand.ToString().Contains($"<{nameof(ProjectDefine.Value)}>k__BackingField"))
                    {
                        continue;
                    }
                    
                    //ã€€å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€ä¸€ã¤å‰ã®å‘½ä»¤ã‚’å–å¾—ã—ã€ã‚ªãƒšã‚³ãƒ¼ãƒ‰ãŒLdstrã§ãªã„å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
                    var prevInstruction = postProcessor.Body.Instructions[i - 1];
                    if (prevInstruction.OpCode != OpCodes.Ldstr)
                    {
                        continue;
                    }
                    // æ›¸ãæ›ãˆ
                    prevInstruction.Operand = "Hello ILPostProcessor";
                }

                return ILPostProcessUtility.GetResult(assembly, diagnosticMessageList);
            }
            return new ILPostProcessResult(null, diagnosticMessageList);
        }
    }
}
```
:::
stfldã«`<Value>k__BackingField`ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã«ä½¿ç”¨ã—ã€å«ã¾ã‚Œã¦ã„ã‚‹å ´åˆ1ã¤å‰ã®å‘½ä»¤ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã‚ˆã†ã«ã—ãŸ

### çµæœ
![](/images/2023-12-09/console_log_3.png)
æ›¸ãæ›ãˆãŸã„ç®‡æ‰€ã®ã¿æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## æ–¹é‡
æ›¸ãæ›ãˆãŸã„å€¤ã«Attributeã‚’ã¤ã‘ã‚‹æ–¹é‡ã‚’å–ã£ã¦ã¿ã‚‹

### ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹ã®ç”¨æ„
```
Settings
â”œâ”€â”€ ProjectDefine.cs
â”œâ”€â”€ RewritingAttribute.cs
â”œâ”€â”€ Settings.asmdef
â””â”€â”€ TemporaryClass.cs
```
`RewritingAttribute.cs`ã‚’è¿½åŠ 
:::details æ›¸ãæ›ãˆãŸã„ç®‡æ‰€æŒ‡å®šã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚¯ãƒ©ã‚¹
```csharp RewritingAttribute.cs
using System;

namespace Settings
{
    [AttributeUsage(AttributeTargets.Property)]
    public class RewritingAttribute : System.Attribute
    {
    }
}
```
:::
:::details ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’ã¤ã‘ãŸProjectDefine.cs
```csharp ProjectDefine.cs
using System;

namespace Settings
{
    public class ProjectDefine
    {
        /// <summary>
        /// æ›¸ãæ›ãˆãªãã¦ã‚‚ã„ã„æ–‡å­—åˆ—
        /// </summary>
        public string Value2 { get; } = "Hello Japan";
        
        /// <summary>
        /// æ›¸ãæ›ãˆãŸã„æ–‡å­—åˆ—
        /// </summary>
        [Rewriting]
        public string Value { get; } = "Hello World";
    }
}
```
:::
ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’ã¤ã‘ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹

## PostProcessorã®ä½œæˆ ãã®3
:::details å®šæ•°æ›¸ãæ›ãˆã®PostProcessor
```csharp ConstantRewritingPostProcessor.cs
using System.Collections.Generic;
using System.Linq;
using Mono.Cecil.Cil;
using Mono.Cecil.Rocks;
using Settings;
using Unity.CompilationPipeline.Common.Diagnostics;
using Unity.CompilationPipeline.Common.ILPostProcessing;

namespace Constant.Rewriting.CodeGen
{
    public class ConstantRewritingPostProcessor : ILPostProcessor
    {
        public override ILPostProcessor GetInstance() => this;

        public override bool WillProcess(ICompiledAssembly compiledAssembly)
        {
            // Settings Assemblyã®ã¿ã‚’å¯¾è±¡ã¨ã™ã‚‹
            return compiledAssembly.Name == "Settings";
        }
        
        public override ILPostProcessResult Process(ICompiledAssembly compiledAssembly)
        {
            if (!WillProcess(compiledAssembly))
            {
                return null;
            }

            using var assembly = ILPostProcessUtility.AssemblyDefinitionFor(compiledAssembly);
            var diagnosticMessageList = new List<DiagnosticMessage>();
            foreach (var type in assembly.MainModule.Types)
            {
                foreach (var property in type.Properties)
                {
                    if (!property.HasCustomAttributes)
                    {
                        continue;
                    }

                    var attribute = property.CustomAttributes.FirstOrDefault(attr => attr.AttributeType.FullName == typeof(RewritingAttribute).FullName);

                    if (attribute == null)
                    {
                        continue;
                    }

                    var constructors = type.GetConstructors();
                    foreach (var method in constructors)
                    {
                        var postProcessor = method.Body.GetILProcessor();
                        var instruction = postProcessor.Body.Instructions.FirstOrDefault(
                            inst => inst.Operand != null && inst.Operand.ToString().Contains($"<{property.Name}>k__BackingField")
                        );
                        
                        if (instruction == null)
                        {
                            continue;
                        }
                        
                        var prevInstruction = instruction.Previous;
                        if (prevInstruction.OpCode != OpCodes.Ldstr)
                        {
                            continue;
                        }
                        // æ›¸ãæ›ãˆ
                        prevInstruction.Operand = "Hello ILPostProcessor";
                    }
                    return ILPostProcessUtility.GetResult(assembly, diagnosticMessageList);
                }
            }
            return new ILPostProcessResult(null, diagnosticMessageList);
        }
    }
}
```
:::
ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆãŒã¤ã„ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨åŒã˜åå‰ã®BackingFieldãŒã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã«å­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã€å­˜åœ¨ã™ã‚‹å ´åˆã¯1ã¤å‰ã®å‘½ä»¤ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ãŸ
ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‹ã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«ã—ãŸãŸã‚ã€`ProjectDefine`ã®`Value`ä»¥å¤–ã‚‚ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’ã¤ã‘ã‚Œã°æ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ

### çµæœ
![](/images/2023-12-09/console_log_4.png)
ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã¤ã‘ãŸç®‡æ‰€ã®ã¿æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

## çµ‚ã‚ã‚Šã«
æœ¬è¨˜äº‹ã§ã¯ILPostProcessorã§å®šæ•°ã‚’æ›¸ãæ›ãˆã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚
ä»Šå›å®Ÿè£…ã—ãŸå†…å®¹ã¯Githubä¸Šã§å…¬é–‹ã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€ä½µã›ã¦ã”ç¢ºèªãã ã•ã„ã€‚
https://github.com/kozuka-hayato-ab/ILPostProcessorTest

ä»¥ä¸Šã€ã€Œ[Applibot Advent Calendar 2023](https://qiita.com/advent-calendar/2023/applibot)ã€ 8æ—¥ç›®ã®è¨˜äº‹ã§ã—ãŸã€‚
æ˜æ—¥ã¯[@hoge](https://qiita.com/hoge)ã•ã‚“ã§ã™ï¼


## å‚è€ƒè¨˜äº‹
1. [Qiita -ã€Unityã€‘ILPostProcessorã¨asmrefã‚’ä½¿ã£ãŸå¤–éƒ¨Packageã®ãƒ¡ã‚½ãƒƒãƒ‰æ›¸ãæ›ãˆ](https://qiita.com/sune2/items/bb23de9364f966ada933)
2. [Qiita - C#ã§æ‰‹è»½ã«ILã‚„å†…éƒ¨ã‚’ç¢ºèªã™ã‚‹ãªã‚‰ã€ŒSharpLabã€ï¼](https://qiita.com/RyotaMurohoshi/items/a6a252915f11f7559efe)
3. [æœªç¢ºèªé£›è¡Œ C - å°ãƒã‚¿ éš ã—ãƒ¡ãƒ³ãƒãƒ¼](https://ufcpp.net/blog/2016/12/tipsimplicitmembers/)